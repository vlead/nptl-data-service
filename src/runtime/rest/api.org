#+TITLE: The REST API
#+AUTHOR: VLEAD
#+DATE: [2017-04-13 Thu]
#+SETUPFILE: ../../org-templates/level-2.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil
          
* Introduction 
  This document illustrates building of the REST API.
  
* REST

** Fetch the string containing the keyword
   - This function will give the string between the two indexes passed
     into this function,to get the string between two points

#+NAME: kw_string
#+BEGIN_SRC python
from flask import session, render_template, Blueprint, request, \
     jsonify, abort, current_app, redirect, url_for
api = Blueprint('APIs', __name__)
def keyword_string(globalStr, pos1, pos2):
    middle_str = globalStr[pos1 :pos2]
    first_brace = middle_str.find("\"")
    second_brace = middle_str.find("\"", (first_brace + 1) )
    return middle_str[ (first_brace + 1) : second_brace]
#+END_SRC
   
** Get the Nptel URL links
    - This function will fetch the url based on the keyword.

#+NAME: fetch_url
#+BEGIN_SRC python

def fetchURL(mainStr, word, wordPosList):
    start = mainStr.find('[', wordPosList)
    end = mainStr.find(']', start)
    linkStr = mainStr[start : end]
    index = 0
    while index < len(linkStr):
            index = linkStr.find(',', index)
            if index == -1:
                break
            comaPos.append(index)
            index += 1
    comaPos.append(len(linkStr))
    pos = 0
    for loop in range (0, len(comaPos)):
            print keyword_string(linkStr, pos, comaPos[loop])
            pos = comaPos[loop]
    del comaPos0[:]

#+END_SRC

** Main
#+NAME: main_python
#+BEGIN_SRC python
@api.route('/', methods=['GET', 'POST'])
def get_generic_feedback():
    if request.method == 'GET':
        return "helloworld"
#+END_SRC
   
* Tangle                                                        :boilerplate:
  
** sources

#+BEGIN_SRC python :tangle api.py :eval no :noweb yes
<<kw_string>>
<<fetch_url>>
<<main_python>>
#+END_SRC



